import"./chunk-b3cdbad1.js";let s=null;async function i(e){const t="https://i18qdel8wk.execute-api.ap-south-1.amazonaws.com/default/summarize",n={text:e};return(await(await fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})).json()).summary}async function m(){const e=document.getSelection(),t=document.createRange();t.selectNodeContents(document.body),e.addRange(t),document.execCommand("copy"),document.execCommand("copy"),e.removeAllRanges()}let a="";function c(){const e=document.createElement("textarea");e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.value="",e.focus(),document.execCommand("paste");const t=e.value;return e.remove(),t}function l(){try{a=c(),console.log("Caching clipboard value: "+a)}catch(e){console.error(e)}}async function u(){await navigator.clipboard.writeText(a),console.log("Restoring clipboard value from cache: "+a)}async function d(){try{console.log("Trying to cache clipboard value;"),l();const e=await chrome.tabs.query({active:!0,currentWindow:!0}),t=await chrome.scripting.executeScript({target:{tabId:e[0].id},func:m});if(chrome.runtime.lastError){console.error(chrome.runtime.lastError);return}await new Promise(r=>setTimeout(r,50));let n=c(),o=await i(n);s=o,console.log("The summary is "+o),document.getElementById("summary").innerHTML=o,(o==null||o=="undefined")&&(document.getElementById("summary").innerHTML="Sorry, the webpage you are trying to summarize is too long for our summarization model to handle. Please try a shorter webpage."),document.getElementById("loader").style.display="none"}catch(e){console.error(e),document.getElementById("summary").innerHTML="Sorry, the webpage you are trying to summarize is too long for our summarization model to handle. Please try a shorter webpage."}finally{await u(),document.getElementById("loader").style.display="none"}}document.querySelector("#app").innerHTML=`
<main>
<h3 autocapitalize=off>pageSummary</h3>
<span class="loader" id="loader"></span>
<div id="summary"></div>
</main>
`;d();
